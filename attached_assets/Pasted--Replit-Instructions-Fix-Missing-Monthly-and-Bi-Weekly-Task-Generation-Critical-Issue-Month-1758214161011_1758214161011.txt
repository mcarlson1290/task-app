# Replit Instructions: Fix Missing Monthly and Bi-Weekly Task Generation

## Critical Issue
Monthly and bi-weekly tasks are not generating properly. About a dozen recurring templates exist but their task instances are missing or incomplete.

## Monthly Task Schedule Reminder
- **Visibility**: 1st of month through last day of month
- **Due Date**: Last day of the month
- **Generation Rule**: ONE task per month, visible the entire month
- **Current Month Rule**: If a monthly template is added on October 25th, October's task should be created immediately (visible Oct 1-31, due Oct 31)

## Bi-Weekly Task Schedule Reminder
- **First Half**:
  - Visibility: 1st through 14th
  - Due Date: 14th of month
  - Generation Rule: Create if today is between 1st-14th
  
- **Second Half**:
  - Visibility: 15th through last day
  - Due Date: Last day of month
  - Generation Rule: Create if today is between 15th-31st

- **ALWAYS TWO per month**, no more, no less

## The Current Period Problem

When checking if tasks should exist, the system must check:
1. What period are we currently in?
2. Does a task exist for this current period?
3. If not, create it immediately

### Example: Monthly Task
Today is October 25th:
- Check: Are we in October? YES
- Check: Does October's monthly task exist? NO
- Action: Create October task (visible Oct 1-31, due Oct 31)

### Example: Bi-Weekly Task  
Today is October 25th (after the 15th):
- Check: Are we in the second half of October? YES
- Check: Does October's second-half task exist? NO
- Action: Create second-half task (visible Oct 15-31, due Oct 31)

## Investigation Steps

1. Check how many recurring templates have frequency = 'monthly' or 'biweekly'
2. For each template, verify if current period tasks exist
3. Look at the generation logic - it might be skipping current periods

## Common Generation Mistakes

1. **Only generating future periods** - Skipping the current month/period
2. **Checking generation date instead of period** - "We're past the 1st so don't generate October"
3. **Not handling mid-month template creation** - New templates need immediate current period tasks

## Correct Generation Logic

For each recurring template in the 31-day window:

### Monthly
- If we're in October (any day), October's task should exist
- If we're in November (any day), November's task should exist
- Don't skip October just because it's October 25th

### Bi-Weekly
- If we're in days 1-14, first half task should exist
- If we're in days 15-31, second half task should exist
- Both tasks can exist if checking across period boundaries

## Testing After Fix

1. Count monthly recurring templates
2. Each should have a task for current month
3. Each should have a task for next month (if within 31 days)

4. Count bi-weekly recurring templates  
5. Each should have appropriate tasks for current period
6. Each should have 2 tasks per month maximum

If you have 12 monthly templates, you should see:
- 12 tasks for October (if today is in October)
- 12 tasks for November (if November is within 31 days)

If you have 6 bi-weekly templates, you should see:
- 6 tasks for current period (either 1st-14th or 15th-end)
- Additional tasks for future periods within 31 days