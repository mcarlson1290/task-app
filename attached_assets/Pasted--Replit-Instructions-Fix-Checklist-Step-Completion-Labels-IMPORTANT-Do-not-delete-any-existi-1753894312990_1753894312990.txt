# Replit Instructions: Fix Checklist Step Completion Labels

**IMPORTANT: Do not delete any existing tasks, recurring tasks, or user data. Only update the code functionality while preserving all existing data.**

## Issue: Fix "Skip Step" Label and Task Completion Flow

### Problem:
- The button says "Skip Step" but should say "Complete Step"
- Task completion should be separate from checklist completion
- Users need to explicitly click "Complete Task" even after finishing all checklist items

## Changes Required:

### 1. Update Checklist Step Button Label
Find where the checklist shows "Skip Step" and change it to "Complete Step":

```javascript
// FIND:
<button onClick={() => handleSkipStep(step.id)}>
  Skip Step
</button>

// REPLACE WITH:
<button onClick={() => handleCompleteStep(step.id)}>
  Complete Step
</button>
```

### 2. Update Function Names for Clarity
Rename the function to match the new purpose:

```javascript
// FIND:
const handleSkipStep = (stepId) => {
  // mark step as skipped
}

// REPLACE WITH:
const handleCompleteStep = (stepId) => {
  // mark step as completed
  setStepStatus(stepId, 'completed');
  // Move to next step if available
  if (currentStepIndex < steps.length - 1) {
    setCurrentStepIndex(currentStepIndex + 1);
  }
}
```

### 3. Separate Checklist Completion from Task Completion

#### When All Checklist Steps Are Complete:
```javascript
// Show a message, but DON'T auto-complete the task
if (allStepsCompleted) {
  return (
    <div className="checklist-complete">
      <div className="success-message">
        ✅ All checklist items completed!
      </div>
      <p className="completion-note">
        Please complete any remaining work, then click "Complete Task" below.
      </p>
      {/* Still show the Complete Task button */}
    </div>
  );
}
```

### 4. Keep "Complete Task" Button Always Visible
The "Complete Task" button should remain visible and active regardless of checklist status:

```javascript
// In the task modal
<div className="task-actions">
  {/* Other buttons... */}
  
  {/* Complete Task button - always visible when task is in progress */}
  {task.status === 'in-progress' && (
    <button 
      className="btn-complete-task"
      onClick={handleCompleteTask}
    >
      Complete Task
    </button>
  )}
</div>
```

### 5. Update Task Completion Logic
Ensure task completion is only triggered by the "Complete Task" button:

```javascript
const handleCompleteTask = () => {
  // Optional: Check if checklist is complete and warn if not
  if (hasChecklist && !allStepsCompleted) {
    if (!confirm('Some checklist items are not completed. Complete task anyway?')) {
      return;
    }
  }
  
  // Mark task as completed
  updateTaskStatus(task.id, 'completed');
  
  // Save all checklist data
  saveChecklistData(task.id, checklistSteps);
  
  // Close modal and show success message
  closeModal();
  showSuccessToast('Task completed successfully!');
};
```

### 6. Visual Indicators
Update the UI to make the flow clear:

```css
/* Completed checklist indicator */
.checklist-complete {
  background: #f0fdf4;
  border: 1px solid #86efac;
  padding: 16px;
  border-radius: 8px;
  margin: 16px 0;
}

.completion-note {
  color: #166534;
  font-size: 14px;
  margin-top: 8px;
}

/* Complete Task button should be prominent */
.btn-complete-task {
  background: #2D8028;
  color: white;
  padding: 12px 24px;
  font-size: 16px;
  font-weight: 600;
  width: 100%;
  margin-top: 20px;
}
```

## Summary of Changes:
1. ✅ "Skip Step" → "Complete Step" label change
2. ✅ Checklist completion doesn't auto-complete the task
3. ✅ "Complete Task" button always visible during task execution
4. ✅ Clear visual feedback when checklist is done but task isn't
5. ✅ Optional warning if completing task with unfinished checklist items

## Expected Behavior:
- User works through checklist items clicking "Complete Step" for each
- When all checklist items are done, they see a success message
- User continues with any additional work not in the checklist
- User explicitly clicks "Complete Task" when fully finished
- Task status only changes to "completed" when "Complete Task" is clicked