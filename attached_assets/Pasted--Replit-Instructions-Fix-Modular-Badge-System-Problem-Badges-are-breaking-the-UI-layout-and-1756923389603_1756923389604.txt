# Replit Instructions: Fix Modular Badge System

## Problem: Badges are breaking the UI layout and need to be modular (2-4 badges per task)

## Step 1: Find the Badge Container

Look for where badges are currently displayed in the task card. It should be near the top of each card.

## Step 2: Create a Proper Badge Container

Replace the current badge implementation with this modular system:

```javascript
{/* Badge Container - Handles 2-4 badges flexibly */}
<div className="flex flex-wrap items-center gap-1 mb-2">
  {/* RECURRING Badge - Only for recurring tasks */}
  {task.recurringTaskId && (
    <span className="inline-flex px-2 py-1 rounded text-xs font-bold uppercase bg-blue-600 text-white">
      RECURRING
    </span>
  )}
  
  {/* Day Badge - Always present */}
  <span className="inline-flex px-2 py-1 rounded text-xs font-bold uppercase bg-teal-500 text-white">
    {getDayAbbreviation(task.dueDate || task.completionDate)}
  </span>
  
  {/* Priority Badge - Show when priority exists */}
  {task.priority && (
    <span className={`inline-flex px-2 py-1 rounded text-xs font-bold uppercase text-white
      ${task.priority === 'high' ? 'bg-red-500' : 
        task.priority === 'medium' ? 'bg-yellow-500' : 
        'bg-green-500'}
    `}>
      {task.priority}
    </span>
  )}
  
  {/* Frequency Badge - Only for recurring tasks with frequency */}
  {task.recurringTaskId && task.frequency && (
    <span className={`inline-flex px-2 py-1 rounded text-xs font-bold uppercase text-white
      ${task.frequency === 'daily' ? 'bg-green-600' : 
        task.frequency === 'biweekly' ? 'bg-cyan-600' : 
        task.frequency === 'monthly' ? 'bg-purple-600' : 
        task.frequency === 'quarterly' ? 'bg-orange-600' : 
        'bg-gray-600'}
    `}>
      {task.frequency === 'daily' ? 'WEEKLY' :
       task.frequency === 'biweekly' ? 'BI-WK' :
       task.frequency === 'monthly' ? 'MONTHLY' :
       task.frequency === 'quarterly' ? 'QTLY' : 
       'CUSTOM'}
    </span>
  )}
</div>
```

## Step 3: Alternative - Compact Badge Layout

If space is tight, use this more compact version:

```javascript
{/* Compact Badge Container */}
<div className="flex flex-wrap items-center gap-1 mb-1">
  {/* Only show badges that exist */}
  {[
    // Recurring badge
    task.recurringTaskId && (
      <span key="recurring" className="px-1.5 py-0.5 rounded text-xs font-semibold bg-blue-600 text-white">
        REC
      </span>
    ),
    
    // Day badge (always shown)
    <span key="day" className="px-1.5 py-0.5 rounded text-xs font-semibold bg-teal-500 text-white">
      {getDayAbbreviation(task.dueDate || task.completionDate)}
    </span>,
    
    // Priority badge
    task.priority && (
      <span key="priority" className={`px-1.5 py-0.5 rounded text-xs font-semibold text-white
        ${task.priority === 'high' ? 'bg-red-500' : 
          task.priority === 'medium' ? 'bg-yellow-500' : 
          'bg-green-500'}
      `}>
        {task.priority.substring(0, 3).toUpperCase()}
      </span>
    ),
    
    // Frequency badge
    task.frequency && task.recurringTaskId && (
      <span key="frequency" className="px-1.5 py-0.5 rounded text-xs font-semibold bg-gray-600 text-white">
        {task.frequency === 'daily' ? 'WK' :
         task.frequency === 'biweekly' ? 'BI' :
         task.frequency === 'monthly' ? 'MON' :
         task.frequency === 'quarterly' ? 'QTR' : 
         '?'}
      </span>
    ),
  ].filter(Boolean)}
</div>
```

## Step 4: Fix Badge Order and Priority

Ensure badges appear in a consistent order:

```javascript
const TaskBadges = ({ task }) => {
  const badges = [];
  
  // 1. Recurring indicator (if applicable)
  if (task.recurringTaskId) {
    badges.push(
      <span key="recurring" className="px-2 py-1 rounded text-xs font-bold bg-blue-600 text-white">
        RECURRING
      </span>
    );
  }
  
  // 2. Day of week
  badges.push(
    <span key="day" className="px-2 py-1 rounded text-xs font-bold bg-teal-500 text-white">
      {getDayAbbreviation(task.dueDate || task.completionDate)}
    </span>
  );
  
  // 3. Priority (if set)
  if (task.priority) {
    const priorityColors = {
      high: 'bg-red-500',
      medium: 'bg-yellow-500',
      low: 'bg-green-500'
    };
    badges.push(
      <span key="priority" className={`px-2 py-1 rounded text-xs font-bold text-white ${priorityColors[task.priority]}`}>
        {task.priority.toUpperCase()}
      </span>
    );
  }
  
  return (
    <div className="flex flex-wrap items-center gap-1 mb-2">
      {badges}
    </div>
  );
};
```

## Step 5: Responsive Badge Container

For better mobile support:

```javascript
<div className="w-full">
  <div className="inline-flex flex-wrap items-center gap-1">
    {/* Badges render here */}
  </div>
</div>
```

## Key Points

1. **Use `flex-wrap`** - Badges wrap to next line if needed
2. **Consistent spacing** - `gap-1` between all badges
3. **Modular approach** - Each badge is independent
4. **Filter out nulls** - Only show badges that exist
5. **Fixed sizing** - All badges use same padding/text size

## Expected Results

- **One-time task**: 2 badges (Day + Priority)
- **Recurring task**: 3-4 badges (Recurring + Day + Priority + Frequency)
- **Basic task**: 1-2 badges (Day, maybe Priority)

All badges will align properly without breaking the layout.