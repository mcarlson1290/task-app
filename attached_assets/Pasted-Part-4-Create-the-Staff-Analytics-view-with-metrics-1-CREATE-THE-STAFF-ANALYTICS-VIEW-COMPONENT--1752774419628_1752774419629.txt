Part 4: Create the Staff Analytics view with metrics:

1. CREATE THE STAFF ANALYTICS VIEW COMPONENT:
   ```jsx
   const StaffAnalyticsView = ({ staff }) => {
     // Get mock task data for calculations (in real app, this would come from your task system)
     const mockTasksForAnalytics = [
       { id: 1, assignedTo: 'Alex Martinez', status: 'completed', actualDuration: '45m', completedAt: '2024-03-15' },
       { id: 2, assignedTo: 'Sarah Johnson', status: 'completed', actualDuration: '30m', completedAt: '2024-03-15' },
       { id: 3, assignedTo: 'Alex Martinez', status: 'completed', actualDuration: '1h 15m', completedAt: '2024-03-14' },
       // Add more mock tasks as needed
     ];
     
     const [dateRange, setDateRange] = useState('last30days');
     const [selectedMetric, setSelectedMetric] = useState('tasks');
     
     // Calculate summary metrics
     const activeStaff = staff.filter(s => s.activeStatus === 'active');
     const totalStaff = staff.length;
     const avgPayRate = staff.reduce((sum, s) => sum + s.payRate, 0) / staff.length;
     
     // Calculate total labor cost (simplified)
     const calculateTotalLaborCost = () => {
       let totalCost = 0;
       staff.forEach(person => {
         const hoursWorked = person.tasksCompleted * 0.75; // Rough estimate
         totalCost += hoursWorked * person.payRate;
       });
       return totalCost;
     };
     
     const totalLaborCost = calculateTotalLaborCost();
     
     // Calculate average on-time rate
     const avgOnTimeRate = staff.reduce((sum, s) => sum + s.onTimeRate, 0) / staff.length;
     
     return (
       <div className="staff-analytics-view">
         {/* Date Range Filter */}
         <div className="analytics-toolbar">
           <select 
             value={dateRange} 
             onChange={(e) => setDateRange(e.target.value)}
             className="date-range-select"
           >
             <option value="last7days">Last 7 Days</option>
             <option value="last30days">Last 30 Days</option>
             <option value="last90days">Last 90 Days</option>
           </select>
           
           <select 
             value={selectedMetric} 
             onChange={(e) => setSelectedMetric(e.target.value)}
             className="metric-select"
           >
             <option value="tasks">Tasks Completed</option>
             <option value="hours">Hours Worked</option>
             <option value="efficiency">Efficiency</option>
             <option value="cost">Labor Cost</option>
           </select>
         </div>
         
         {/* Summary Cards */}
         <div className="analytics-cards">
           <div className="analytics-card">
             <div className="card-icon">üë•</div>
             <div className="card-content">
               <h3>Total Staff</h3>
               <div className="metric">{totalStaff}</div>
               <div className="sub-metric">{activeStaff.length} active</div>
             </div>
           </div>
           
           <div className="analytics-card">
             <div className="card-icon">üí∞</div>
             <div className="card-content">
               <h3>Avg Pay Rate</h3>
               <div className="metric">${avgPayRate.toFixed(2)}</div>
               <div className="sub-metric">per hour</div>
             </div>
           </div>
           
           <div className="analytics-card">
             <div className="card-icon">‚è±Ô∏è</div>
             <div className="card-content">
               <h3>On-Time Rate</h3>
               <div className="metric">{avgOnTimeRate.toFixed(1)}%</div>
               <div className="sub-metric">average</div>
             </div>
           </div>
           
           <div className="analytics-card">
             <div className="card-icon">üíµ</div>
             <div className="card-content">
               <h3>Labor Cost (30d)</h3>
               <div className="metric">${totalLaborCost.toFixed(2)}</div>
               <div className="sub-metric">estimated</div>
             </div>
           </div>
         </div>
         
         {/* Performance Rankings */}
         <div className="performance-section">
           <h3>üèÜ Top Performers by {selectedMetric === 'tasks' ? 'Tasks Completed' : 
                                      selectedMetric === 'hours' ? 'Hours Worked' :
                                      selectedMetric === 'efficiency' ? 'Efficiency Rate' :
                                      'Cost Efficiency'}</h3>
           <div className="rankings-list">
             {activeStaff
               .sort((a, b) => {
                 switch (selectedMetric) {
                   case 'tasks':
                     return b.tasksCompleted - a.tasksCompleted;
                   case 'efficiency':
                     return b.onTimeRate - a.onTimeRate;
                   case 'cost':
                     return (a.tasksCompleted / a.payRate) - (b.tasksCompleted / b.payRate);
                   default:
                     return b.tasksCompleted - a.tasksCompleted;
                 }
               })
               .slice(0, 10)
               .map((person, index) => (
                 <StaffRankingRow 
                   key={person.id}
                   person={person}
                   rank={index + 1}
                   metric={selectedMetric}
                 />
               ))
             }
           </div>
         </div>
         
         {/* Individual Performance Cards */}
         <div className="individual-performance">
           <h3>üìä Individual Performance Details</h3>
           <div className="performance-grid">
             {activeStaff.map(person => (
               <StaffPerformanceCard 
                 key={person.id}
                 staff={person}
               />
             ))}
           </div>
         </div>
         
         {/* Training Overview */}
         <TrainingOverview staff={staff} />
       </div>
     );
   };

CREATE THE RANKING ROW COMPONENT:
jsxconst StaffRankingRow = ({ person, rank, metric }) => {
  const getRankEmoji = (rank) => {
    switch (rank) {
      case 1: return 'ü•á';
      case 2: return 'ü•à';
      case 3: return 'ü•â';
      default: return `#${rank}`;
    }
  };
  
  const getMetricValue = () => {
    switch (metric) {
      case 'tasks':
        return `${person.tasksCompleted} tasks`;
      case 'efficiency':
        return `${person.onTimeRate}% on-time`;
      case 'cost':
        const costPerTask = person.payRate / (person.tasksCompleted / 100);
        return `$${costPerTask.toFixed(2)}/task`;
      default:
        return person.tasksCompleted;
    }
  };
  
  return (
    <div className="ranking-row">
      <span className="rank">{getRankEmoji(rank)}</span>
      <div className="person-info">
        <span className="name">{person.fullName}</span>
        <span className="roles">{person.rolesAssigned.join(', ')}</span>
      </div>
      <span className="metric-value">{getMetricValue()}</span>
    </div>
  );
};

CREATE THE PERFORMANCE CARD COMPONENT:
jsxconst StaffPerformanceCard = ({ staff }) => {
  // Calculate individual metrics
  const hoursWorked = staff.tasksCompleted * 0.75; // Rough estimate
  const laborCost = hoursWorked * staff.payRate;
  const costPerTask = staff.tasksCompleted > 0 ? laborCost / staff.tasksCompleted : 0;
  
  // Task type breakdown (mock data)
  const taskBreakdown = {
    'Seeding': Math.floor(staff.tasksCompleted * 0.3),
    'Harvesting': Math.floor(staff.tasksCompleted * 0.25),
    'Cleaning': Math.floor(staff.tasksCompleted * 0.2),
    'Packing': Math.floor(staff.tasksCompleted * 0.15),
    'Other': Math.floor(staff.tasksCompleted * 0.1)
  };
  
  return (
    <div className="performance-card">
      <div className="card-header">
        <h4>{staff.fullName}</h4>
        <span className={`status-indicator ${staff.activeStatus}`}>
          {staff.activeStatus}
        </span>
      </div>
      
      <div className="performance-metrics">
        <div className="metric-row">
          <span className="label">Tasks Completed:</span>
          <span className="value">{staff.tasksCompleted}</span>
        </div>
        <div className="metric-row">
          <span className="label">Avg Task Duration:</span>
          <span className="value">{staff.avgTaskDuration}</span>
        </div>
        <div className="metric-row">
          <span className="label">On-Time Rate:</span>
          <span className={`value ${staff.onTimeRate > 95 ? 'good' : staff.onTimeRate > 85 ? 'warning' : 'poor'}`}>
            {staff.onTimeRate}%
          </span>
        </div>
        <div className="metric-row">
          <span className="label">Est. Labor Cost:</span>
          <span className="value">${laborCost.toFixed(2)}</span>
        </div>
        <div className="metric-row">
          <span className="label">Cost per Task:</span>
          <span className="value">${costPerTask.toFixed(2)}</span>
        </div>
      </div>
      
      {/* Mini Task Breakdown Chart */}
      <div className="task-breakdown">
        <h5>Tasks by Type</h5>
        <div className="breakdown-bars">
          {Object.entries(taskBreakdown).map(([type, count]) => (
            <div key={type} className="breakdown-item">
              <span className="type-label">{type}</span>
              <div className="bar-container">
                <div 
                  className="bar" 
                  style={{ width: `${(count / staff.tasksCompleted) * 100}%` }}
                />
              </div>
              <span className="count">{count}</span>
            </div>
          ))}
        </div>
      </div>
    </div>
  );
};

CREATE THE TRAINING OVERVIEW COMPONENT:
jsxconst TrainingOverview = ({ staff }) => {
  // Get all unique training courses
  const allCourses = [
    'Basic Safety & Orientation',
    'Seeding Technician Certification',
    'Harvest Operations Training',
    'Equipment Operation & Maintenance',
    'Manager Fundamentals'
  ];
  
  return (
    <div className="training-overview">
      <h3>üéì Training Completion Matrix</h3>
      <div className="training-matrix">
        <table>
          <thead>
            <tr>
              <th>Staff Member</th>
              {allCourses.map(course => (
                <th key={course} className="course-header">
                  {course.split(' ').map(word => word[0]).join('')}
                </th>
              ))}
            </tr>
          </thead>
          <tbody>
            {staff.map(person => (
              <tr key={person.id}>
                <td className="staff-name-cell">{person.fullName}</td>
                {allCourses.map(course => (
                  <td key={course} className="status-cell">
                    {person.trainingCompleted.includes(course) ? (
                      <span className="completed">‚úÖ</span>
                    ) : person.trainingInProgress.includes(course) ? (
                      <span className="in-progress">üìö</span>
                    ) : (
                      <span className="not-started">-</span>
                    )}
                  </td>
                ))}
              </tr>
            ))}
          </tbody>
        </table>
      </div>
      
      {/* Course name legend */}
      <div className="course-legend">
        <h4>Course Abbreviations:</h4>
        <ul>
          {allCourses.map(course => (
            <li key={course}>
              <strong>{course.split(' ').map(word => word[0]).join('')}:</strong> {course}
            </li>
          ))}
        </ul>
      </div>
    </div>
  );
};

UPDATE THE MAIN COMPONENT:
jsx// In StaffData component, update the analytics tab:
{activeTab === 'edit' ? (
  <StaffEditView 
    staff={staff}
    isManager={isManager}
  />
) : (
  <StaffAnalyticsView 
    staff={staff}
  />
)}

ADD ANALYTICS STYLING:
css/* Analytics View */
.staff-analytics-view {
  padding: 20px;
}

.analytics-toolbar {
  display: flex;
  gap: 16px;
  margin-bottom: 24px;
}

.date-range-select,
.metric-select {
  padding: 8px 16px;
  border: 1px solid #d1d5db;
  border-radius: 6px;
  background: white;
}

/* Analytics Cards */
.analytics-cards {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
  gap: 20px;
  margin-bottom: 32px;
}

.analytics-card {
  background: white;
  padding: 20px;
  border-radius: 8px;
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
  display: flex;
  gap: 16px;
}

.card-icon {
  font-size: 32px;
}

.card-content h3 {
  margin: 0 0 8px 0;
  font-size: 14px;
  color: #6b7280;
  font-weight: 500;
}

.metric {
  font-size: 28px;
  font-weight: 700;
  color: #203B17;
}

.sub-metric {
  font-size: 14px;
  color: #6b7280;
  margin-top: 4px;
}

/* Rankings */
.performance-section {
  background: white;
  padding: 24px;
  border-radius: 8px;
  margin-bottom: 24px;
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
}

.performance-section h3 {
  margin: 0 0 20px 0;
  color: #1f2937;
}

.rankings-list {
  display: flex;
  flex-direction: column;
  gap: 12px;
}

.ranking-row {
  display: flex;
  align-items: center;
  gap: 16px;
  padding: 12px;
  background: #f9fafb;
  border-radius: 6px;
}

.ranking-row:hover {
  background: #f3f4f6;
}

.rank {
  font-size: 20px;
  font-weight: 600;
  width: 40px;
}

.person-info {
  flex: 1;
  display: flex;
  flex-direction: column;
}

.person-info .name {
  font-weight: 500;
  color: #1f2937;
}

.person-info .roles {
  font-size: 13px;
  color: #6b7280;
}

.metric-value {
  font-weight: 600;
  color: #059669;
}

/* Performance Grid */
.individual-performance {
  margin-top: 32px;
}

.individual-performance h3 {
  margin-bottom: 20px;
  color: #1f2937;
}

.performance-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
  gap: 20px;
}

.performance-card {
  background: white;
  padding: 20px;
  border-radius: 8px;
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
}

.performance-card .card-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 16px;
}

.performance-card h4 {
  margin: 0;
  color: #1f2937;
  font-size: 18px;
}

.status-indicator {
  font-size: 12px;
  padding: 4px 8px;
  border-radius: 12px;
}

.status-indicator.active {
  background: #d1fae5;
  color: #065f46;
}

.performance-metrics {
  margin-bottom: 16px;
}

.metric-row {
  display: flex;
  justify-content: space-between;
  padding: 6px 0;
  font-size: 14px;
}

.metric-row .label {
  color: #6b7280;
}

.metric-row .value {
  font-weight: 500;
  color: #1f2937;
}

.metric-row .value.good {
  color: #059669;
}

.metric-row .value.warning {
  color: #f59e0b;
}

.metric-row .value.poor {
  color: #dc2626;
}

/* Task Breakdown */
.task-breakdown {
  margin-top: 16px;
  padding-top: 16px;
  border-top: 1px solid #e5e7eb;
}

.task-breakdown h5 {
  margin: 0 0 12px 0;
  font-size: 14px;
  color: #6b7280;
}

.breakdown-bars {
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.breakdown-item {
  display: grid;
  grid-template-columns: 80px 1fr 40px;
  align-items: center;
  gap: 8px;
  font-size: 13px;
}

.type-label {
  color: #6b7280;
}

.bar-container {
  background: #e5e7eb;
  height: 20px;
  border-radius: 4px;
  overflow: hidden;
}

.bar {
  height: 100%;
  background: #2D8028;
  transition: width 0.3s ease;
}

/* Training Matrix */
.training-overview {
  margin-top: 32px;
  background: white;
  padding: 24px;
  border-radius: 8px;
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
}

.training-overview h3 {
  margin: 0 0 20px 0;
  color: #1f2937;
}

.training-matrix {
  overflow-x: auto;
  margin-bottom: 20px;
}

.training-matrix table {
  width: 100%;
  border-collapse: collapse;
}

.training-matrix th,
.training-matrix td {
  padding: 8px;
  text-align: center;
  border: 1px solid #e5e7eb;
}

.training-matrix th {
  background: #f3f4f6;
  font-weight: 600;
}

.course-header {
  writing-mode: vertical-lr;
  text-orientation: mixed;
  font-size: 12px;
}

.staff-name-cell {
  text-align: left !important;
  font-weight: 500;
}

.status-cell .completed {
  color: #059669;
}

.status-cell .in-progress {
  color: #f59e0b;
}

.status-cell .not-started {
  color: #d1d5db;
}

.course-legend {
  background: #f9fafb;
  padding: 16px;
  border-radius: 6px;
}

.course-legend h4 {
  margin: 0 0 8px 0;
  font-size: 14px;
}

.course-legend ul {
  list-style: none;
  padding: 0;
  margin: 0;
  font-size: 13px;
}

.course-legend li {
  margin: 4px 0;
}

/* Mobile */
@media (max-width: 768px) {
  .analytics-cards {
    grid-template-columns: 1fr;
  }
  
  .performance-grid {
    grid-template-columns: 1fr;
  }
  
  .training-matrix {
    font-size: 12px;
  }
}


This completes the Staff Data page with:

Summary analytics cards
Performance rankings by different metrics
Individual performance cards with labor costs
Task type breakdowns
Training completion matrix
Responsive design