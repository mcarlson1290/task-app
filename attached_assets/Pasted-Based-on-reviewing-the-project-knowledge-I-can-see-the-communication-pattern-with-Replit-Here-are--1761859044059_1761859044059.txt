Based on reviewing the project knowledge, I can see the communication pattern with Replit. Here are the instructions in the style you use:

Replit Instructions: Fix Refresh Tasks Duplicate Check
IMPORTANT: Do not delete any existing tasks, recurring tasks, or user data. Only update the code functionality while preserving all existing data.
The Problem
The Refresh Tasks button isn't removing duplicates as it should. Multiple copies of the same task can exist and refreshing doesn't clean them up.
Tell Replit:
"The Refresh Tasks duplicate check is broken. When I click refresh, it should remove all duplicate tasks but it's not working. Fix the duplicate detection and removal in the refresh function."
Required Fix:
Find the refreshTasks function and update it to properly detect and remove duplicates:
javascript// The refresh function needs to:
// 1. Find all duplicate tasks (same title + date + location + recurringTaskId)
// 2. Keep only ONE instance (the original or most recently updated)
// 3. Delete all duplicate instances from the database

async function refreshTasks() {
  try {
    // Show loading state
    console.log("=== STARTING REFRESH WITH DUPLICATE CHECK ===");
    
    // Load all tasks
    const allTasks = await loadAllTasksFromDatabase();
    console.log(`Found ${allTasks.length} total tasks`);
    
    // Group tasks by unique key to find duplicates
    const taskGroups = new Map();
    
    allTasks.forEach(task => {
      // Create composite key for duplicate detection
      const key = `${task.title}-${task.taskDate}-${task.location || 'none'}-${task.recurringTaskId || 'none'}`;
      
      if (!taskGroups.has(key)) {
        taskGroups.set(key, []);
      }
      taskGroups.get(key).push(task);
    });
    
    // Process duplicates
    let duplicatesRemoved = 0;
    const tasksToKeep = [];
    const tasksToDelete = [];
    
    taskGroups.forEach((duplicates, key) => {
      if (duplicates.length > 1) {
        console.log(`Found ${duplicates.length} duplicates for: ${key}`);
        
        // Sort by updatedAt (keep most recent) or by ID (keep original)
        duplicates.sort((a, b) => {
          // First try updatedAt
          if (a.updatedAt && b.updatedAt) {
            return new Date(b.updatedAt) - new Date(a.updatedAt);
          }
          // Fall back to ID (lower ID = older = original)
          return a.id - b.id;
        });
        
        // Keep first one, delete the rest
        tasksToKeep.push(duplicates[0]);
        for (let i = 1; i < duplicates.length; i++) {
          tasksToDelete.push(duplicates[i]);
          duplicatesRemoved++;
        }
      } else {
        // No duplicates, keep the task
        tasksToKeep.push(duplicates[0]);
      }
    });
    
    // Delete duplicates from database
    console.log(`Removing ${duplicatesRemoved} duplicate tasks...`);
    for (const task of tasksToDelete) {
      await deleteTaskFromDatabase(task.id);
    }
    
    // Update UI with clean task list
    setTasks(tasksToKeep);
    
    // Show completion message
    console.log(`=== REFRESH COMPLETE ===`);
    console.log(`- Started with: ${allTasks.length} tasks`);
    console.log(`- Removed: ${duplicatesRemoved} duplicates`);
    console.log(`- Final count: ${tasksToKeep.length} unique tasks`);
    
    // Show success message to user
    if (duplicatesRemoved > 0) {
      alert(`Refresh complete! Removed ${duplicatesRemoved} duplicate tasks.`);
    }
    
  } catch (error) {
    console.error("Error during refresh:", error);
    alert("Error refreshing tasks. Check console for details.");
  }
}
Key Requirements:

Composite Key: Use title + date + location + recurringTaskId to identify duplicates
Keep the Right One: When duplicates exist, keep the most recently updated OR the original (lowest ID)
Actually Delete: Remove duplicates from the database, not just the UI
User Feedback: Show how many duplicates were removed
Console Logging: Log the process so we can debug if needed

Edge Cases to Handle:

Tasks with null vs undefined recurringTaskId
Tasks with trimmed vs untrimmed titles (use .trim())
Tasks with slightly different dates due to timezone issues (compare date strings)

This will make the Refresh Tasks button actually clean up duplicates every time it's clicked.