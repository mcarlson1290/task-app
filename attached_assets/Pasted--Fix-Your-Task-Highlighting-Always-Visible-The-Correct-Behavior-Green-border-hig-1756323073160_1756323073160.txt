# ðŸŸ¢ Fix "Your Task" Highlighting - Always Visible

## The Correct Behavior:
- **Green border/highlight** â†’ ALWAYS shows on tasks assigned to you
- **"Assigned to Me" filter** â†’ Hides tasks NOT assigned to you (declutter mode)

## 1. UPDATE TASK CARD - Always Check Assignment

```javascript
// In your TaskCard component
const TaskCard = ({ task, currentUser, staff }) => {
  
  // ALWAYS check if this task is assigned to current user
  const isAssignedToMe = () => {
    if (!currentUser || !task.assignTo) return false;
    
    // Direct user assignment
    if (task.assignTo === `user_${currentUser.id}`) return true;
    
    // All staff assignment
    if (task.assignTo === 'all_staff' && currentUser.id) return true;
    
    // Role assignment
    if (task.assignTo?.startsWith('role_')) {
      const roleName = task.assignTo.replace('role_', '');
      const userStaff = staff.find(s => s.id === currentUser.id);
      return userStaff?.rolesAssigned?.includes(roleName) || false;
    }
    
    return false;
  };
  
  const assignedToMe = isAssignedToMe();
  
  // ALWAYS apply the highlight if assigned to user
  return (
    <div className={`task-card ${assignedToMe ? 'assigned-to-me' : ''}`}>
      {/* ALWAYS show badge if assigned */}
      {assignedToMe && (
        <div className="assigned-to-me-badge">
          ðŸ“Œ Your Task
        </div>
      )}
      
      {/* Rest of task card */}
    </div>
  );
};
```

## 2. UPDATE FILTER LOGIC - Hide Others, Not Yours

```javascript
// In your filter logic
const getFilteredTasks = () => {
  return tasks.filter(task => {
    // ... other filters ...
    
    // "Assigned to Me" filter - HIDE tasks NOT assigned to you
    if (filters.assignedToMe) {
      // Only show tasks that ARE assigned to current user
      if (!isTaskAssignedToUser(task, currentUser, staff)) {
        return false; // Hide this task
      }
    }
    
    // ... rest of filters ...
    return true;
  });
};
```

## 3. ENSURE VISUAL DISTINCTION

The CSS should make "Your Tasks" clearly stand out:

```css
/* Always visible assignment indicator */
.task-card.assigned-to-me {
  border-left: 4px solid #2D8028;
  background: linear-gradient(to right, rgba(45, 128, 40, 0.05) 0%, transparent 100%);
  position: relative;
}

/* Make it even more obvious */
.task-card.assigned-to-me::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  height: 3px;
  background: #2D8028;
}

.assigned-to-me-badge {
  position: absolute;
  top: 8px;
  right: 8px;
  background: #2D8028;
  color: white;
  padding: 4px 10px;
  border-radius: 12px;
  font-size: 11px;
  font-weight: 600;
  z-index: 10;
}
```

## 4. UPDATE FILTER LABEL

Change the filter label to be clearer:

```javascript
// Instead of:
<span className="toggle-label">ðŸ“Œ Assigned to Me</span>

// Use:
<span className="toggle-label">ðŸ“Œ Only My Tasks</span>
// or
<span className="toggle-label">ðŸ“Œ Hide Other Tasks</span>
```

## Summary:

The green highlighting is now a **safety feature** that prevents accidentally working on wrong tasks:
- âœ… Always shows green border on your tasks
- âœ… Always shows "Your Task" badge
- âœ… Filter only hides tasks that AREN'T yours
- âœ… You can always see which tasks are yours at a glance

This way users can quickly identify their responsibilities without risk of starting someone else's task.