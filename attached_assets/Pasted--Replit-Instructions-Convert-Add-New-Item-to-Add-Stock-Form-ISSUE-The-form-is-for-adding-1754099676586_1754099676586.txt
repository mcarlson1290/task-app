# Replit Instructions: Convert "Add New Item" to "Add Stock" Form

**ISSUE: The form is for adding stock to existing items, not creating new inventory items**

## Step 1: Update Modal Title and Button Text

```tsx
// Change from:
<h2>ðŸ§ª Add New Item to Inventory</h2>
<button>Add to Inventory</button>

// To:
<h2>ðŸ“¦ Add Stock</h2>
<button>Add Stock</button>
```

## Step 2: Replace Item Name Input with SKU Dropdown

Remove the text input and add a dropdown to select existing items:

```tsx
// REMOVE this:
<div>
  <label>Item Name *</label>
  <input 
    type="text" 
    placeholder="e.g., Spinach Seeds - Bloomsdale"
    value={itemName}
    onChange={(e) => setItemName(e.target.value)}
  />
</div>

// ADD this:
<div>
  <label>Select Item *</label>
  <select 
    value={selectedSku}
    onChange={(e) => handleSkuSelect(e.target.value)}
    required
  >
    <option value="">Select an item...</option>
    {inventoryItems.map(item => (
      <option key={item.sku} value={item.sku}>
        [{item.sku}] {item.name}
      </option>
    ))}
  </select>
</div>
```

## Step 3: Auto-populate Fields When Item Selected

```tsx
const handleSkuSelect = (sku) => {
  setSelectedSku(sku);
  
  // Find the selected item
  const item = inventoryItems.find(i => i.sku === sku);
  
  if (item) {
    // Auto-fill category and unit from existing item
    setCategory(item.category);
    setUnit(item.unit);
    // Show current stock level
    setCurrentStock(item.currentStock);
  }
};
```

## Step 4: Remove Fields That Don't Apply

Remove these fields since we're adding to existing items:

```tsx
// REMOVE these sections:
// - SKU input (using dropdown instead)
// - Category selector (inherited from existing item)  
// - Unit selector (inherited from existing item)
// - Minimum Stock Level (not needed for adding stock)

// KEEP these:
// - Quantity to Add
// - Supplier
// - Total Cost Paid
```

## Step 5: Update the Form Layout

```tsx
const AddStockModal = ({ onClose, onAdd }) => {
  const [selectedSku, setSelectedSku] = useState('');
  const [currentStock, setCurrentStock] = useState(0);
  const [quantityToAdd, setQuantityToAdd] = useState('');
  const [supplier, setSupplier] = useState('');
  const [totalCost, setTotalCost] = useState('');
  
  return (
    <div className="modal">
      <h2>ðŸ“¦ Add Stock</h2>
      
      {/* Item Selection */}
      <div>
        <label>Select Item *</label>
        <select value={selectedSku} onChange={(e) => handleSkuSelect(e.target.value)}>
          <option value="">Select an item...</option>
          {/* Map inventory items */}
        </select>
      </div>
      
      {/* Show current stock when item selected */}
      {selectedSku && (
        <div className="info-box">
          Current Stock: {currentStock} {getItemUnit(selectedSku)}
        </div>
      )}
      
      {/* Quantity to Add */}
      <div>
        <label>Quantity to Add *</label>
        <input 
          type="number"
          value={quantityToAdd}
          onChange={(e) => setQuantityToAdd(e.target.value)}
          min="0"
          step="0.001"
        />
      </div>
      
      {/* Supplier */}
      <div>
        <label>Supplier</label>
        <input
          type="text"
          value={supplier}
          onChange={(e) => setSupplier(e.target.value)}
          placeholder="e.g., Johnny Seeds"
        />
      </div>
      
      {/* Total Cost */}
      <div>
        <label>Total Cost Paid ($) *</label>
        <input
          type="number"
          value={totalCost}
          onChange={(e) => setTotalCost(e.target.value)}
          min="0"
          step="0.01"
          placeholder="0.00"
        />
      </div>
      
      {/* Cost per Unit (calculated) */}
      {quantityToAdd && totalCost && (
        <div className="calculated-field">
          Cost Per Unit: ${(totalCost / quantityToAdd).toFixed(2)} / {getItemUnit(selectedSku)}
        </div>
      )}
      
      <div className="buttons">
        <button onClick={onClose}>Cancel</button>
        <button onClick={handleAddStock} disabled={!selectedSku || !quantityToAdd || !totalCost}>
          Add Stock
        </button>
      </div>
    </div>
  );
};
```

## Step 6: Update the Save Logic

```tsx
const handleAddStock = () => {
  const item = inventoryItems.find(i => i.sku === selectedSku);
  
  if (!item) return;
  
  // Add to existing stock
  const updatedItem = {
    ...item,
    currentStock: item.currentStock + parseFloat(quantityToAdd),
    lastRestocked: new Date(),
    transactions: [
      ...item.transactions,
      {
        type: 'restock',
        quantity: parseFloat(quantityToAdd),
        supplier: supplier,
        cost: parseFloat(totalCost),
        date: new Date()
      }
    ]
  };
  
  updateInventoryItem(updatedItem);
  onClose();
};
```

## Summary of Changes:
- Title: "Add New Item to Inventory" â†’ "Add Stock"
- Item selection: Text input â†’ Dropdown of existing SKUs
- Removed: SKU input, Category, Unit, Minimum Stock Level
- Kept: Quantity to Add, Supplier, Total Cost
- Shows current stock level when item selected
- Adds to existing inventory instead of creating new items