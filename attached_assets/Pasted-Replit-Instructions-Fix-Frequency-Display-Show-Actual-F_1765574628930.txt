Replit Instructions: Fix Frequency Display - Show Actual Frequency Not "Custom"
IMPORTANT: Do not delete any existing tasks, recurring tasks, or user data. Only update the code functionality while preserving all existing data.
The Problem
Tasks with monthly, quarterly, or bi-weekly frequency are displaying "CUSTOM" instead of their actual frequency type. This makes it impossible for users to know the task schedule.
Tell Replit:
"Tasks are showing 'CUSTOM' for frequency instead of MONTHLY, QUARTERLY, or BI-WEEKLY. Fix the frequency display to show the actual recurring schedule type."
Required Fixes:
1. Fix Frequency Display Logic
javascript// Find where frequency badge is displayed and fix it
const getFrequencyDisplay = (task) => {
  if (!task.frequency) return '';
  
  // Map frequency values to display text
  const frequencyMap = {
    'weekly': 'WEEKLY',
    'bi-weekly': 'BI-WEEKLY',
    'biweekly': 'BI-WEEKLY', // Handle both spellings
    'monthly': 'MONTHLY',
    'quarterly': 'QUARTERLY',
    'custom': 'CUSTOM' // Only show custom if actually custom
  };
  
  // Return the mapped value or the raw frequency if not found
  return frequencyMap[task.frequency.toLowerCase()] || task.frequency.toUpperCase();
};

// For the frequency badge component
const FrequencyBadge = ({ task }) => {
  const frequency = getFrequencyDisplay(task);
  
  // Don't show badge if no frequency
  if (!frequency) return null;
  
  // Different colors for different frequencies
  const getFrequencyColor = () => {
    switch (task.frequency?.toLowerCase()) {
      case 'weekly':
        return '#4CAF50'; // Green
      case 'bi-weekly':
      case 'biweekly':
        return '#2196F3'; // Blue
      case 'monthly':
        return '#FF9800'; // Orange
      case 'quarterly':
        return '#9C27B0'; // Purple
      default:
        return '#666'; // Gray for custom
    }
  };
  
  return (
    <span 
      className="frequency-badge"
      style={{ backgroundColor: getFrequencyColor() }}
    >
      {frequency}
    </span>
  );
};
2. Fix Task Generation to Set Correct Frequency
javascript// When generating tasks from recurring templates
const generateTaskFromTemplate = (template) => {
  const task = {
    ...template,
    frequency: template.frequency, // Ensure frequency is copied
    // Don't override with 'custom'
  };
  
  // Make sure frequency is preserved correctly
  if (template.frequency === 'bi-weekly' || template.frequency === 'biweekly') {
    task.frequency = 'bi-weekly';
  }
  
  return task;
};
3. Fix Database Save to Preserve Frequency
javascript// When saving recurring tasks
const saveRecurringTask = async (taskData) => {
  // Ensure frequency is saved correctly
  const dataToSave = {
    ...taskData,
    frequency: taskData.frequency, // Don't let this get overridden
  };
  
  // Validate frequency before saving
  const validFrequencies = ['weekly', 'bi-weekly', 'monthly', 'quarterly'];
  if (!validFrequencies.includes(dataToSave.frequency)) {
    console.warn(`Invalid frequency: ${dataToSave.frequency}`);
  }
  
  await saveToDatabase(dataToSave);
};
4. Add Period Information for Clarity
javascript// For bi-weekly and quarterly, show which period
const getFrequencyWithPeriod = (task) => {
  const base = getFrequencyDisplay(task);
  
  if (task.frequency === 'bi-weekly' || task.frequency === 'biweekly') {
    // Check if it's first or second half of month
    const day = new Date(task.dueDate).getDate();
    const period = day <= 14 ? '1st Half' : '2nd Half';
    return `${base} (${period})`;
  }
  
  if (task.frequency === 'quarterly') {
    // Show which quarter
    const month = new Date(task.dueDate).getMonth();
    const quarter = Math.floor(month / 3) + 1;
    return `${base} (Q${quarter})`;
  }
  
  return base;
};
5. Update Task Card Display
javascript// In your task card component
const TaskCard = ({ task }) => {
  return (
    <div className="task-card">
      <div className="task-header">
        <h3>{task.title}</h3>
        <div className="badges">
          <FrequencyBadge task={task} />
          {/* Show day for weekly tasks */}
          {task.frequency === 'weekly' && task.selectedDays && (
            <span className="day-badge">
              {task.selectedDays.join(', ').toUpperCase()}
            </span>
          )}
          <PriorityBadge priority={task.priority} />
        </div>
      </div>
      {/* Rest of card */}
    </div>
  );
};
6. Fix the Root Cause - Find Where 'CUSTOM' is Being Set
javascript// Search your code for where frequency is being set to 'custom'
// Common places to check:

// 1. In recurring task creation
if (frequency !== 'weekly' && frequency !== 'daily') {
  // WRONG - Don't do this
  task.frequency = 'custom';
}

// CORRECT - Preserve actual frequency
task.frequency = frequency; // Keep monthly, bi-weekly, quarterly

// 2. In task generation
// WRONG
const frequency = getSomeValue() || 'custom';

// CORRECT
const frequency = getSomeValue() || template.frequency;

// 3. In display logic
// WRONG
const displayFreq = isStandardFrequency(freq) ? freq : 'custom';

// CORRECT  
const displayFreq = freq; // Just show what it is
7. Migration Fix for Existing Tasks
javascript// One-time fix to correct existing tasks
const fixExistingTaskFrequencies = async () => {
  const allTasks = await loadAllTasks();
  
  for (const task of allTasks) {
    if (task.frequency === 'custom' && task.recurringTaskId) {
      // Load the recurring template
      const template = await loadRecurringTemplate(task.recurringTaskId);
      
      if (template && template.frequency !== 'custom') {
        // Fix the task frequency
        task.frequency = template.frequency;
        await updateTask(task);
        console.log(`Fixed task ${task.id} frequency to ${template.frequency}`);
      }
    }
  }
};
CSS for Frequency Badges:
css.frequency-badge {
  padding: 2px 8px;
  border-radius: 4px;
  color: white;
  font-size: 11px;
  font-weight: bold;
  margin-right: 4px;
}

.badges {
  display: flex;
  gap: 4px;
  align-items: center;
}
Key Points:

Never Default to Custom: Only show "CUSTOM" if the frequency truly is custom
Preserve Original Values: Don't override monthly/quarterly/bi-weekly with 'custom'
Clear Visual Distinction: Use different colors for each frequency type
Show Period Info: For bi-weekly show "1st Half/2nd Half", for quarterly show "Q1/Q2/Q3/Q4"
Fix Existing Data: Run migration to correct tasks already showing 'custom'

Testing:

Create monthly recurring task → Should show "MONTHLY" badge
Create bi-weekly task → Should show "BI-WEEKLY" badge
Create quarterly task → Should show "QUARTERLY" badge
Only actual custom schedules should show "CUSTOM"
Check existing tasks are corrected after fix