# Replit Instructions: Fix Edit Inventory Form - Show Correct Quantities

**ISSUE: Edit form shows 0 for Current Stock and Minimum Stock instead of actual values (80 kg and 40 kg)**

## The Problem
Looking at the screenshot:
- Table shows: Arugula Seeds - 80 kg current stock, 40 kg minimum
- Edit form shows: 0 for both Current Stock and Minimum Stock
- The name and SKU are populating correctly, but quantities are not

## Step 1: Check Field Name Mismatch

The most likely issue is field name mismatch. The table might use different field names than the form expects:

```tsx
// In the edit form initialization, check both possible field names:
const handleEditItem = (item) => {
  console.log('Item data:', item); // Debug to see actual field names
  
  setFormData({
    name: item.name || '',
    sku: item.sku || '',
    // Try multiple field names for current stock
    currentStock: item.currentStock || item.quantity || item.current_stock || 0,
    // Try multiple field names for minimum stock  
    minimumStock: item.minimumStock || item.minimum_stock || item.minStock || item.reorderPoint || 0,
    unit: item.unit || '',
    category: item.category || 'Other Supplies',
    supplier: item.supplier || '',
    // ... other fields
  });
};
```

## Step 2: Fix the Edit Form Component

In the Edit Inventory Modal, ensure it's reading the correct fields:

```tsx
const EditInventoryModal = ({ item, isOpen, onClose, onSave }) => {
  // Initialize with empty state
  const [formData, setFormData] = useState({
    name: '',
    sku: '',
    currentStock: '',
    minimumStock: '',
    unit: '',
    category: '',
    supplier: ''
  });

  // When modal opens or item changes, populate the form
  useEffect(() => {
    if (item && isOpen) {
      console.log('Populating form with item:', item); // Debug log
      
      setFormData({
        name: item.name || '',
        sku: item.sku || '',
        // Check the actual field names from your inventory data
        currentStock: item.quantity || item.currentStock || item.current_stock || 0,
        minimumStock: item.minimumStock || item.minimum_stock || item.minStock || 0,
        unit: item.unit || '',
        category: item.category || 'Other Supplies',
        supplier: item.supplier || '',
        costPerUnit: item.costPerUnit || item.cost_per_unit || 0,
        lastRestocked: item.lastRestocked || item.last_restocked || ''
      });
    }
  }, [item, isOpen]);

  return (
    <div className="modal">
      {/* ... modal header ... */}
      
      <div className="form-group">
        <label>Current Stock *</label>
        <div className="input-group">
          <input
            type="number"
            value={formData.currentStock}
            onChange={(e) => setFormData({...formData, currentStock: e.target.value})}
            step="0.1"
          />
          <span className="unit-label">{formData.unit || 'units'}</span>
        </div>
      </div>

      <div className="form-group">
        <label>Minimum Stock *</label>
        <div className="input-group">
          <input
            type="number"
            value={formData.minimumStock}
            onChange={(e) => setFormData({...formData, minimumStock: e.target.value})}
            step="0.1"
          />
          <span className="unit-label">{formData.unit || 'units'}</span>
        </div>
      </div>
      
      {/* ... rest of form ... */}
    </div>
  );
};
```

## Step 3: Check How Inventory Data is Stored

Look at how inventory items are stored in localStorage or state:

```tsx
// Add this debug function to check data structure
const debugInventoryItem = (itemId) => {
  const inventory = JSON.parse(localStorage.getItem('inventory') || '[]');
  const item = inventory.find(i => i.id === itemId);
  console.log('Inventory item structure:', item);
  console.log('Field names:', Object.keys(item));
};
```

## Step 4: Ensure Consistent Field Names

When saving inventory items, ensure consistent field names:

```tsx
const saveInventoryItem = (item) => {
  const inventory = JSON.parse(localStorage.getItem('inventory') || '[]');
  
  // Standardize field names
  const standardizedItem = {
    id: item.id,
    name: item.name,
    sku: item.sku,
    quantity: parseFloat(item.currentStock || item.quantity || 0), // Standardize to 'quantity'
    minimumStock: parseFloat(item.minimumStock || 0),
    unit: item.unit,
    category: item.category,
    supplier: item.supplier,
    costPerUnit: parseFloat(item.costPerUnit || 0),
    lastRestocked: item.lastRestocked,
    // ... other fields
  };
  
  // Update or add item
  const index = inventory.findIndex(i => i.id === item.id);
  if (index > -1) {
    inventory[index] = standardizedItem;
  } else {
    inventory.push(standardizedItem);
  }
  
  localStorage.setItem('inventory', JSON.stringify(inventory));
};
```

## Step 5: Quick Fix - Force Number Conversion

Sometimes the issue is that values are stored as strings:

```tsx
// In the form initialization
currentStock: parseFloat(item.quantity || item.currentStock || '0'),
minimumStock: parseFloat(item.minimumStock || item.minimum_stock || '0'),
```

## Debugging Steps:

1. Open browser console
2. Click Edit on an inventory item
3. Look for the console.log output showing the item data
4. Check what field names are actually used (might be `quantity` instead of `currentStock`)
5. Update the form to use the correct field names

The most common issue is that the table displays data using one field name (like `quantity`) but the edit form expects a different name (like `currentStock`).