# Replit Instructions: Build Automated Task Generation System

**CRITICAL: Do NOT hardcode individual task instances. Build an AUTOMATED system that continuously maintains tasks.**

## The Problem to Solve

The system needs an automated process that ensures tasks ALWAYS exist for the next 31 days. No manual task creation. No hardcoded instances. Pure automation.

## Build This Generation System

### 1. Daily Generation Process

Create a function that runs:
- Every day at midnight
- On app startup if not run today
- When any user accesses the task list

```
DailyGenerationProcess:
1. Check database: "When did we last generate?"
2. For each day from (last generation + 1) to (today + 31):
   - Determine what tasks should exist on that date
   - Create them if they don't exist
3. Update "last generation date" to today
```

### 2. Generation Logic Per Date

For any given date, the system asks:

**"What recurring tasks should exist on [date]?"**

Check all active recurring templates:
- Is it the 1st? → Generate monthly tasks
- Is it the 1st or 15th? → Generate bi-weekly tasks  
- Is it Mon/Tue/Wed/etc? → Generate matching daily/weekly tasks
- Is it start of quarter? → Generate quarterly tasks

### 3. Continuous Buffer Maintenance

The system maintains a rolling 31-day buffer:
- Today is Oct 10? Tasks exist through Nov 10
- Today is Oct 11? Generate Nov 11 tasks
- Today is Oct 12? Generate Nov 12 tasks

**Never let the buffer shrink below 31 days**

### 4. New Recurring Task Handling

When a recurring task is created:
```
1. Save the template
2. Immediately run generation for next 31 days
3. Include current period if applicable:
   - Monthly created on Oct 20? Generate October's task
   - Bi-weekly created on Oct 20? Generate Oct 15-31 task
```

### 5. Database Structure for Generation

**generation_log table:**
- location_id
- last_generation_date
- last_generation_timestamp

**recurring_tasks table:**
- All template data
- is_active (boolean)
- created_date

**tasks table:**
- All instance data
- generation_date (when it was created)
- parent_recurring_task_id

### 6. Prevent Duplicate Generation

Before creating any task:
```
Check if task already exists where:
- parent_recurring_task_id matches
- due_date matches
- location matches

If exists: Skip
If not: Create
```

### 7. Generation Monitoring Display

Add a read-only status display showing:
- Last generation run: [timestamp]
- Tasks exist through: [date]
- Total future tasks: [count]
- Generation health: GREEN/YELLOW/RED

This is VIEW ONLY - no buttons or manual triggers

### 8. Automatic Triggers Only

The generation MUST run automatically via:
- App initialization (when any user opens the app)
- Midnight scheduled process
- After creating/editing recurring templates
- When viewing tasks page (if not run today)

NO manual buttons - the system must be fully automated

## What NOT to Do

❌ Do NOT create individual tasks manually
❌ Do NOT hardcode specific dates or tasks
❌ Do NOT use setTimeout or intervals - use proper scheduling
❌ Do NOT generate more than 31 days ahead
❌ Do NOT skip generation if "some tasks exist"
❌ Do NOT add manual generation buttons - must be fully automated

## Implementation Order

1. Build the generation logic function
2. Add database generation tracking
3. Implement automatic triggers:
   - On app initialization
   - After recurring task create/edit
   - At midnight (scheduled)
4. Add generation monitoring display
5. Test system runs automatically without intervention

## Testing the System

1. Delete all existing tasks
2. Close and reopen the app → Should create 31 days of tasks automatically
3. Check tomorrow → Should automatically create 1 more day of tasks
4. Create new monthly recurring task on the 15th → Should immediately see current month's task
5. Look 30 days ahead → Should see tasks for all active recurring templates

## Success Criteria

The system is working when:
- Opening the app on any day shows tasks through 31 days in future
- No manual intervention needed
- Creating new recurring tasks shows immediate results
- Multiple users see the same generated tasks
- No duplicate tasks are created
- Generation runs efficiently (< 5 seconds)

## Final Note

This is a SET-AND-FORGET system. Once built, it should maintain the 31-day task buffer automatically forever without any manual intervention or hardcoded solutions.