# Replit Instructions: Explicit Task Generation Rules

## Critical Issues Still Present

1. **Tasks stop at month end** - Should go 31 days regardless of month boundaries
2. **Weekly tasks appear on wrong days** - A Wednesday task appears on Monday, Tuesday, etc.

## EXPLICIT GENERATION RULES

### Weekly Tasks (frequency = 'daily')
**RULE**: If a task has selectedDays = ['Wednesday'], it should ONLY create tasks on Wednesdays.

**Example**: Today is October 25th (Friday)
- Should create tasks on: Oct 30 (Wed), Nov 6 (Wed), Nov 13 (Wed), Nov 20 (Wed)
- Should NOT create tasks on any other days
- Total tasks in 31 days: 4-5 instances (only Wednesdays)

### Monthly Tasks  
**RULE**: ONE task per month, visible from 1st through last day

**Example**: Today is October 25th
- Current month: Create October task (visible Oct 1-31, due Oct 31)
- Next month: Create November task (visible Nov 1-30, due Nov 30)
- Total tasks: 2 (October and November)

### Bi-Weekly Tasks
**RULE**: TWO tasks per month, never more, never less

**First Half**:
- Visible: 1st through 14th
- Due: 14th

**Second Half**:
- Visible: 15th through last day  
- Due: Last day

**Example**: Today is October 25th
- October second half: (visible Oct 15-31, due Oct 31) 
- November first half: (visible Nov 1-14, due Nov 14)
- November second half: (visible Nov 15-30, due Nov 30)
- Total tasks: 3 instances

### Quarterly Tasks
**RULE**: ONE task per quarter, visible throughout the quarter

**Example**: Today is October 25th (Q4)
- Q4 task: (visible Oct 1 - Dec 31, due Dec 31)
- Total tasks: 1 instance

## The 31-Day Rule (NOT Month Boundary)

**WRONG**: Generate from Oct 25 to Oct 31 (only 6 days)
**CORRECT**: Generate from Oct 25 to Nov 25 (full 31 days)

The system must:
```
startDate = today
endDate = today + 31 days
```

NOT:
```
endDate = end of current month
```

## Weekly Task Logic Check

For each day in the 31-day range:
1. What day of the week is it? (Monday, Tuesday, etc.)
2. Is this day in the template's selectedDays array?
3. If YES: Create task for this date
4. If NO: Skip this date entirely

**Debug Example**:
```
Template: "Water Plants" with selectedDays = ['Monday', 'Thursday']
Checking Oct 28 (Monday) - YES, create task
Checking Oct 29 (Tuesday) - NO, skip
Checking Oct 30 (Wednesday) - NO, skip  
Checking Oct 31 (Thursday) - YES, create task
Checking Nov 1 (Friday) - NO, skip
```

## Verification Examples

### Test 1: Wednesday-Only Task
Create a weekly task assigned to Wednesday only.
**Expected**: See tasks on Oct 30, Nov 6, Nov 13, Nov 20, Nov 27 (5 Wednesdays)
**NOT**: 31 tasks (one per day)

### Test 2: Month Boundary
On October 25th, check the latest task date.
**Expected**: Tasks exist through November 25th
**NOT**: Tasks stop at October 31st

### Test 3: Bi-Weekly Count
For any month, bi-weekly tasks should have exactly 2 instances:
- One for days 1-14
- One for days 15-end
**NOT**: Daily instances or more than 2 per month

## Common Mistakes to Fix

1. **Creating weekly tasks without checking the day name**
   - Must compare task day with actual calendar day

2. **Using month-end as boundary**
   - Must use today + 31 days

3. **Creating multiple bi-weekly tasks**
   - Maximum 2 per month, no exceptions

4. **Not parsing selectedDays correctly**
   - Array contains full day names: ['Monday', 'Tuesday', 'Wednesday']
   - Not numbers or abbreviations