# Dev Testing Page Implementation

## Create a Developer Tools Page

### 1. Create the Dev Page Component

```typescript
// Create new file: /src/pages/DevTools.tsx

import React, { useState } from 'react';
import { useNavigate } from 'react-router-dom';

const DevTools = () => {
  const [overdueProtection, setOverdueProtection] = useState(
    localStorage.getItem('devOverdueProtection') === 'true'
  );
  const [message, setMessage] = useState('');
  const navigate = useNavigate();

  // Only allow access for Robert
  const currentUser = JSON.parse(localStorage.getItem('currentUser') || '{}');
  const hasAccess = currentUser.email === 'robert@growspace.farm';

  if (!hasAccess) {
    return (
      <div style={{ padding: '20px', textAlign: 'center' }}>
        <h2>Access Denied</h2>
        <p>Developer tools are restricted to Robert.</p>
        <button onClick={() => navigate('/')}>Go Back</button>
      </div>
    );
  }

  // Toggle overdue protection
  const toggleOverdueProtection = () => {
    const newValue = !overdueProtection;
    setOverdueProtection(newValue);
    localStorage.setItem('devOverdueProtection', newValue.toString());
    setMessage(`Overdue protection ${newValue ? 'ENABLED' : 'DISABLED'}`);
    setTimeout(() => setMessage(''), 3000);
  };

  // Skip all overdue tasks
  const skipAllOverdueTasks = async () => {
    try {
      // Get all tasks
      const tasks = JSON.parse(localStorage.getItem('tasks') || '[]');
      
      // Find overdue tasks
      const now = new Date();
      let skippedCount = 0;
      
      const updatedTasks = tasks.map(task => {
        if (task.status !== 'completed' && 
            task.status !== 'skipped' && 
            new Date(task.dueDate) < now) {
          skippedCount++;
          return {
            ...task,
            status: 'skipped',
            skippedAt: now.toISOString(),
            skippedBy: currentUser.name,
            skippedReason: 'Bulk skip via dev tools'
          };
        }
        return task;
      });

      // Save updated tasks
      localStorage.setItem('tasks', JSON.stringify(updatedTasks));
      
      setMessage(`Skipped ${skippedCount} overdue tasks`);
      setTimeout(() => setMessage(''), 3000);
    } catch (error) {
      setMessage('Error skipping tasks: ' + error.message);
    }
  };

  // Clear all test data (bonus function)
  const clearTestData = () => {
    if (window.confirm('This will clear ALL test tasks. Are you sure?')) {
      // Remove only test-related data, keep user and config data
      localStorage.removeItem('tasks');
      localStorage.removeItem('recurringTasks');
      localStorage.removeItem('taskHistory');
      setMessage('Test data cleared!');
      setTimeout(() => setMessage(''), 3000);
    }
  };

  return (
    <div style={{ 
      padding: '20px', 
      maxWidth: '600px', 
      margin: '0 auto',
      fontFamily: 'system-ui, -apple-system, sans-serif'
    }}>
      <h1>üõ†Ô∏è Developer Tools</h1>
      <p style={{ color: '#666' }}>Testing utilities for development</p>

      {message && (
        <div style={{
          padding: '10px',
          marginBottom: '20px',
          backgroundColor: '#2D8028',
          color: 'white',
          borderRadius: '5px',
          textAlign: 'center'
        }}>
          {message}
        </div>
      )}

      <div style={{ 
        display: 'flex', 
        flexDirection: 'column', 
        gap: '20px',
        marginTop: '30px'
      }}>
        {/* Overdue Protection Toggle */}
        <div style={{
          padding: '20px',
          backgroundColor: '#f5f5f5',
          borderRadius: '8px',
          border: '1px solid #ddd'
        }}>
          <h3>Overdue Task Protection</h3>
          <p>When enabled, tasks will never show as overdue (for testing)</p>
          <button
            onClick={toggleOverdueProtection}
            style={{
              padding: '10px 20px',
              backgroundColor: overdueProtection ? '#dc3545' : '#2D8028',
              color: 'white',
              border: 'none',
              borderRadius: '5px',
              cursor: 'pointer',
              fontSize: '16px'
            }}
          >
            {overdueProtection ? 'üõ°Ô∏è Protection ON' : '‚ö†Ô∏è Protection OFF'}
          </button>
        </div>

        {/* Skip All Overdue Tasks */}
        <div style={{
          padding: '20px',
          backgroundColor: '#f5f5f5',
          borderRadius: '8px',
          border: '1px solid #ddd'
        }}>
          <h3>Skip All Overdue Tasks</h3>
          <p>Mark all currently overdue tasks as skipped</p>
          <button
            onClick={skipAllOverdueTasks}
            style={{
              padding: '10px 20px',
              backgroundColor: '#ff9800',
              color: 'white',
              border: 'none',
              borderRadius: '5px',
              cursor: 'pointer',
              fontSize: '16px'
            }}
          >
            ‚è≠Ô∏è Skip All Overdue
          </button>
        </div>

        {/* Clear Test Data */}
        <div style={{
          padding: '20px',
          backgroundColor: '#f5f5f5',
          borderRadius: '8px',
          border: '1px solid #ddd'
        }}>
          <h3>Clear Test Data</h3>
          <p>Remove all test tasks and history (keeps user data)</p>
          <button
            onClick={clearTestData}
            style={{
              padding: '10px 20px',
              backgroundColor: '#dc3545',
              color: 'white',
              border: 'none',
              borderRadius: '5px',
              cursor: 'pointer',
              fontSize: '16px'
            }}
          >
            üóëÔ∏è Clear Test Data
          </button>
        </div>
      </div>

      <button
        onClick={() => navigate('/')}
        style={{
          marginTop: '40px',
          padding: '10px 20px',
          backgroundColor: '#6c757d',
          color: 'white',
          border: 'none',
          borderRadius: '5px',
          cursor: 'pointer'
        }}
      >
        ‚Üê Back to App
      </button>
    </div>
  );
};

export default DevTools;
```

### 2. Add Route to App

```typescript
// In your main App.tsx or router configuration
import DevTools from './pages/DevTools';

// Add this route
<Route path="/dev" element={<DevTools />} />
```

### 3. Update Task Display Logic

```typescript
// In your task filtering/display logic, check for overdue protection
const isTaskOverdue = (task) => {
  // Check if dev overdue protection is enabled
  const overdueProtection = localStorage.getItem('devOverdueProtection') === 'true';
  if (overdueProtection) {
    return false; // Never show as overdue in dev mode
  }
  
  // Normal overdue logic
  const now = new Date();
  const dueDate = new Date(task.dueDate);
  return dueDate < now && task.status !== 'completed' && task.status !== 'skipped';
};
```

### 4. Add Secret Access (Optional)

```typescript
// Add a hidden keyboard shortcut to access dev tools
// In your main App component
useEffect(() => {
  const handleKeyPress = (e) => {
    // Press Ctrl+Shift+D to open dev tools
    if (e.ctrlKey && e.shiftKey && e.key === 'D') {
      navigate('/dev');
    }
  };
  
  window.addEventListener('keydown', handleKeyPress);
  return () => window.removeEventListener('keydown', handleKeyPress);
}, []);
```

## Instructions for Replit

Tell Replit:

"Create a developer tools page at `/dev` that's only accessible to corporate managers (or robert@growspace.farm and matt@growspace.farm). Add these three functions:

1. **Toggle Overdue Protection**: A button that enables/disables showing tasks as overdue. When enabled, no tasks should appear overdue in the app. Store this setting in localStorage as 'devOverdueProtection'.

2. **Skip All Overdue Tasks**: A button that finds all overdue tasks and marks them as skipped with a reason 'Bulk skip via dev tools'.

3. **Clear Test Data**: A button that clears all test tasks but keeps user data.

Also update the task display logic to check for the overdue protection setting before marking tasks as overdue."

## Usage

1. Navigate to `/dev` in your browser (or use Ctrl+Shift+D shortcut)
2. Toggle overdue protection on for testing
3. Use skip all overdue when you need to clean up
4. Clear test data to start fresh

The page will show success messages for each action and only corporate managers can access it!