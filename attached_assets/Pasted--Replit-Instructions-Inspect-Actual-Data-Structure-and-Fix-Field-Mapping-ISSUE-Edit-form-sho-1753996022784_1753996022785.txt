# Replit Instructions: Inspect Actual Data Structure and Fix Field Mapping

**ISSUE: Edit form shows 0, costs show $0.00, and SKUs are blank - suggests field name mismatch**

## Step 1: Add Data Inspector to Inventory Page

Add this button to the inventory page to see the EXACT data structure:

```tsx
// Add this anywhere on the inventory page (temporarily)
<button 
  onClick={() => {
    const inventory = JSON.parse(localStorage.getItem('inventory') || '[]');
    console.log('=== FULL INVENTORY DATA ===');
    console.log('Total items:', inventory.length);
    
    // Show first 3 items in detail
    inventory.slice(0, 3).forEach((item, index) => {
      console.log(`\n--- Item ${index + 1}: ${item.name || 'Unknown'} ---`);
      console.log('Full object:', item);
      console.log('All fields:', Object.entries(item).map(([key, value]) => `${key}: ${value}`).join('\n'));
    });
    
    // Specifically look for Arugula
    const arugula = inventory.find(item => 
      (item.name && item.name.includes('Arugula')) || 
      (item.itemName && item.itemName.includes('Arugula')) ||
      (item.Name && item.Name.includes('Arugula'))
    );
    
    if (arugula) {
      console.log('\n=== ARUGULA ITEM STRUCTURE ===');
      console.log(JSON.stringify(arugula, null, 2));
    }
    
    // Show all unique field names across all items
    const allFields = new Set();
    inventory.forEach(item => {
      Object.keys(item).forEach(key => allFields.add(key));
    });
    console.log('\n=== ALL FIELD NAMES IN INVENTORY ===');
    console.log(Array.from(allFields).sort());
  }}
  style={{ 
    position: 'fixed', 
    bottom: '20px', 
    right: '20px', 
    padding: '10px 20px',
    background: '#ff0000',
    color: 'white',
    zIndex: 9999 
  }}
>
  üîç Inspect Inventory Data
</button>
```

## Step 2: Fix the Display Components

Once you know the actual field names, update the inventory card display:

```tsx
// In the component that displays inventory cards
const InventoryCard = ({ item }) => {
  // Map the actual field names to display values
  // Replace these with the actual field names from Step 1
  const displayData = {
    name: item.name || item.itemName || item.Name || 'Unknown',
    sku: item.sku || item.SKU || item.itemSKU || '',
    currentStock: item.currentStock || item.stock || item.quantity || item.Stock || 0,
    unit: item.unit || item.units || item.Unit || '',
    minimumStock: item.minimumStock || item.minStock || item.reorderLevel || 0,
    costPerUnit: item.costPerUnit || item.cost || item.unitCost || item.price || 0,
    supplier: item.supplier || item.supplierName || item.Supplier || '',
    category: item.category || item.type || item.Category || ''
  };

  return (
    <div className="inventory-card">
      <h3>{displayData.name}</h3>
      <p>SKU: {displayData.sku}</p>
      <p>Current Stock: {displayData.currentStock} {displayData.unit}</p>
      <p>Minimum Stock: {displayData.minimumStock} {displayData.unit}</p>
      <p>Cost per {displayData.unit}: ${displayData.costPerUnit.toFixed(2)}</p>
      {/* ... rest of display ... */}
    </div>
  );
};
```

## Step 3: Fix the Edit Form

Update the edit form to use the correct field names:

```tsx
const EditInventoryModal = ({ item, isOpen, onClose, onSave }) => {
  const [formData, setFormData] = useState({});

  useEffect(() => {
    if (item && isOpen) {
      // Log to see what we're working with
      console.log('Edit form received item:', item);
      
      // Map all possible field names
      setFormData({
        id: item.id,
        name: item.name || item.itemName || item.Name || '',
        sku: item.sku || item.SKU || item.itemSKU || '',
        // For stock, check multiple possible names
        currentStock: 
          item.currentStock || 
          item.stock || 
          item.quantity || 
          item.Stock || 
          item.currentQuantity ||
          item['Current Stock'] || // Check with space
          0,
        minimumStock: 
          item.minimumStock || 
          item.minStock || 
          item.reorderLevel || 
          item.reorderPoint ||
          item['Minimum Stock'] || // Check with space
          0,
        unit: item.unit || item.units || item.Unit || '',
        category: item.category || item.type || item.Category || 'Other Supplies',
        supplier: item.supplier || item.supplierName || item.Supplier || '',
        costPerUnit: 
          item.costPerUnit || 
          item.cost || 
          item.unitCost || 
          item.price ||
          item['Cost per Unit'] ||
          0
      });
    }
  }, [item, isOpen]);

  // ... rest of form
};
```

## Step 4: Create Field Mapping Configuration

Create a central configuration for field mappings:

```tsx
// Create a file like fieldMappings.js
export const INVENTORY_FIELD_MAPPINGS = {
  name: ['name', 'itemName', 'Name', 'item_name', 'productName'],
  sku: ['sku', 'SKU', 'itemSKU', 'item_sku', 'productCode'],
  currentStock: ['currentStock', 'stock', 'quantity', 'Stock', 'current_stock', 'Current Stock', 'onHand', 'available'],
  minimumStock: ['minimumStock', 'minStock', 'minimum_stock', 'Minimum Stock', 'reorderLevel', 'reorderPoint'],
  unit: ['unit', 'units', 'Unit', 'uom', 'unitOfMeasure'],
  costPerUnit: ['costPerUnit', 'cost', 'unitCost', 'price', 'Cost per Unit', 'unitPrice'],
  supplier: ['supplier', 'supplierName', 'Supplier', 'vendor', 'vendorName']
};

// Helper function to get value using multiple possible field names
export const getFieldValue = (item, fieldName) => {
  const possibleNames = INVENTORY_FIELD_MAPPINGS[fieldName] || [fieldName];
  
  for (const name of possibleNames) {
    if (item[name] !== undefined && item[name] !== null) {
      return item[name];
    }
  }
  
  return null;
};

// Use in components:
const currentStock = getFieldValue(item, 'currentStock') || 0;
const sku = getFieldValue(item, 'sku') || '';
```

## Step 5: Quick Test

After adding the inspect button, click it and check the browser console. You'll see something like:

```
=== ARUGULA ITEM STRUCTURE ===
{
  "id": "123",
  "itemName": "Arugula Seeds",     // <-- Maybe it's itemName not name
  "Stock": 450,                     // <-- Maybe it's Stock not currentStock  
  "Units": "grams",                 // <-- Maybe it's Units not unit
  "ReorderLevel": 100,              // <-- Maybe it's ReorderLevel not minimumStock
  "itemCode": "ARUG",              // <-- Maybe it's itemCode not sku
  "Price": 0                        // <-- This explains the $0.00
}
```

Once you see the actual structure, update all the field names accordingly!