# Replit Instructions: Add Filters to Recurring Tasks Page

**OBJECTIVE: Add search bar, type filter, and frequency filter to the Recurring Tasks page. Also remove the SharePoint Import button.**

## Step 1: Remove SharePoint Import Button

Find the SharePoint Import button in the recurring tasks page header and remove it:

```jsx
// REMOVE THIS BUTTON:
<button className="btn-sharepoint">
  SharePoint Import
</button>
```

## Step 2: Add Filter State Variables

Add state variables to manage the filters:

```jsx
const RecurringTasksPage = () => {
  // Existing state...
  
  // ADD NEW FILTER STATES:
  const [searchTerm, setSearchTerm] = useState('');
  const [typeFilter, setTypeFilter] = useState('all');
  const [frequencyFilter, setFrequencyFilter] = useState('all');
  
  // Rest of component...
};
```

## Step 3: Create Filter UI Components

Replace or update the header section to include filters:

```jsx
<div className="recurring-tasks-header">
  <h1>Recurring Tasks</h1>
  
  {/* Filters Section */}
  <div className="filters-container">
    {/* Search Bar */}
    <div className="filter-group">
      <input
        type="text"
        placeholder="ðŸ” Search tasks..."
        value={searchTerm}
        onChange={(e) => setSearchTerm(e.target.value)}
        className="search-input"
      />
    </div>
    
    {/* Type Filter */}
    <div className="filter-group">
      <select 
        value={typeFilter}
        onChange={(e) => setTypeFilter(e.target.value)}
        className="filter-select"
      >
        <option value="all">All Types</option>
        <option value="seeding">Seeding</option>
        <option value="microgreens">Microgreens</option>
        <option value="blackout tasks">Blackout Tasks</option>
        <option value="moving">Moving</option>
        <option value="harvesting">Harvesting</option>
        <option value="packing">Packing</option>
        <option value="cleaning">Cleaning</option>
        <option value="equipment maintenance">Equipment Maintenance</option>
        <option value="other">Other</option>
      </select>
    </div>
    
    {/* Frequency Filter */}
    <div className="filter-group">
      <select
        value={frequencyFilter}
        onChange={(e) => setFrequencyFilter(e.target.value)}
        className="filter-select"
      >
        <option value="all">All Frequencies</option>
        <option value="weekly">Weekly</option>
        <option value="bi-weekly">Bi-Weekly</option>
        <option value="monthly">Monthly</option>
      </select>
    </div>
    
    {/* Clear Filters Button */}
    {(searchTerm || typeFilter !== 'all' || frequencyFilter !== 'all') && (
      <button 
        onClick={() => {
          setSearchTerm('');
          setTypeFilter('all');
          setFrequencyFilter('all');
        }}
        className="btn-clear-filters"
      >
        âœ• Clear Filters
      </button>
    )}
  </div>
  
  {/* Add Recurring Task Button */}
  <button 
    onClick={() => setShowAddModal(true)}
    className="btn-add-recurring"
  >
    + Add Recurring Task
  </button>
</div>
```

## Step 4: Add Filter Logic

Create a filtered tasks array based on the active filters:

```jsx
// Filter recurring tasks based on search and filters
const filteredRecurringTasks = useMemo(() => {
  let filtered = [...recurringTasks];
  
  // Search filter - searches across title, description, and assigned to
  if (searchTerm) {
    const search = searchTerm.toLowerCase();
    filtered = filtered.filter(task => 
      task.title.toLowerCase().includes(search) ||
      (task.description && task.description.toLowerCase().includes(search)) ||
      (task.assignedTo && task.assignedTo.toLowerCase().includes(search))
    );
  }
  
  // Type filter
  if (typeFilter !== 'all') {
    filtered = filtered.filter(task => 
      task.type && task.type.toLowerCase() === typeFilter.toLowerCase()
    );
  }
  
  // Frequency filter
  if (frequencyFilter !== 'all') {
    filtered = filtered.filter(task => {
      const taskFreq = task.frequency.toLowerCase();
      
      if (frequencyFilter === 'weekly') {
        // Weekly means it happens on specific days of the week
        return taskFreq.includes('monday') || 
               taskFreq.includes('tuesday') || 
               taskFreq.includes('wednesday') || 
               taskFreq.includes('thursday') || 
               taskFreq.includes('friday') || 
               taskFreq.includes('saturday') || 
               taskFreq.includes('sunday');
      }
      
      if (frequencyFilter === 'bi-weekly') {
        return taskFreq.includes('bi-weekly') || taskFreq.includes('biweekly');
      }
      
      if (frequencyFilter === 'monthly') {
        return taskFreq.includes('monthly');
      }
      
      return false;
    });
  }
  
  return filtered;
}, [recurringTasks, searchTerm, typeFilter, frequencyFilter]);
```

## Step 5: Update Task Display

Use the filtered tasks in your task list:

```jsx
{/* Replace recurringTasks.map with filteredRecurringTasks.map */}
{filteredRecurringTasks.length === 0 ? (
  <div className="no-tasks-message">
    No recurring tasks match your filters.
  </div>
) : (
  filteredRecurringTasks.map(task => (
    <RecurringTaskCard key={task.id} task={task} />
  ))
)}
```

## Step 6: Add CSS Styling

Add styles for the new filter components:

```css
.recurring-tasks-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 20px;
  flex-wrap: wrap;
  gap: 15px;
}

.filters-container {
  display: flex;
  gap: 10px;
  align-items: center;
  flex-wrap: wrap;
  flex: 1;
}

.filter-group {
  display: flex;
  align-items: center;
}

.search-input {
  padding: 8px 12px;
  border: 1px solid #e5e5e5;
  border-radius: 6px;
  width: 250px;
  font-size: 14px;
}

.filter-select {
  padding: 8px 12px;
  border: 1px solid #e5e5e5;
  border-radius: 6px;
  background: white;
  font-size: 14px;
  cursor: pointer;
}

.btn-clear-filters {
  padding: 8px 16px;
  background: #6b7280;
  color: white;
  border: none;
  border-radius: 6px;
  cursor: pointer;
  font-size: 14px;
}

.btn-clear-filters:hover {
  background: #4b5563;
}

.btn-add-recurring {
  padding: 10px 20px;
  background: #10b981;
  color: white;
  border: none;
  border-radius: 6px;
  cursor: pointer;
  font-weight: 500;
}

.no-tasks-message {
  text-align: center;
  padding: 40px;
  color: #666;
  font-size: 16px;
}
```

## Summary

This implementation adds:
1. âœ… **Search bar** - searches across title, description, and assigned to fields
2. âœ… **Type filter** - filters by task type (Seeding, Cleaning, etc.)
3. âœ… **Frequency filter** - filters by Daily, Weekly, Bi-Weekly, or Monthly
4. âœ… **Clear filters button** - only shows when filters are active
5. âœ… **Removed SharePoint Import button**

The filters work together, so users can search for "clean" AND filter by "Daily" to find all daily cleaning tasks. The frequency filter intelligently handles the different ways frequencies are stored (e.g., "Daily", "Monday, Wednesday, Friday", etc.).